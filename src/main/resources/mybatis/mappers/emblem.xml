<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="emblem">
	
	<select id="selectUidEmblem" parameterType="string" resultType="emblemVO">
		SELECT e.name, e.img, e.how_achieve
		  FROM emblem_achive a, emblem e 
		 WHERE a.uid=#{uid} AND e.name = a.emblem_name
	</select>
	
	<insert id="insertEmblemId" parameterType="string">
		INSERT INTO cc_rest
			(uid)
		VALUES
			(#{uid})
	</insert>
	
	<update id="increaseRestCount" parameterType="string">
		UPDATE emblem_member
		   SET regist_rest = regist_rest + 1
		 WHERE uid = #{uid}
	</update>
	
	<select id="selectInsertRestCount" parameterType="string" resultType="int">
		SELECT regist_rest
		  FROM emblem_member
		 WHERE uid=#{uid}
	</select>
	
	<insert id="insertFirstRest" parameterType="string">
		INSERT INTO emblem_achive
			(uid, emblem_name)
		VALUES
			(#{uid}, 'firstRest')
	</insert>
	
</mapper>